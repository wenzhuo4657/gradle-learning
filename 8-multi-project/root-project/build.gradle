allprojects {
    apply plugin: 'idea'
    task allTask {
        doLast {
            println project.name
        }
    }
}


subprojects {
    task subTask {
        doLast {
            println project.name
        }
    }
}

project(':sub-project1') {
    task forProject1 {
        doLast {
            println 'for project 1'
        }
    }
}


configure(allprojects.findAll { it.name.startsWith('sub') }) {
    subTask {
        doLast {
            println 'this is a sub project'
        }
    }
}
